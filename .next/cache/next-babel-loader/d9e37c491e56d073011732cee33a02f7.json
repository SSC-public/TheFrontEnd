{"ast":null,"code":"import _ from 'lodash';\nimport produce from 'immer';\nimport cookie from 'js-cookie';\nimport { LOGIN_CLEAR, LOGIN_FAIL, LOGIN_SUCCESS, LOGIN_CHECK, SET_AUTH, LOGOUT } from '../actions/auth';\nimport initialState from '../store/initialState';\n\nfunction loginClearReducer(state = initialState.auth, action) {\n  return produce(state, draft => {\n    draft.authorized = false;\n    draft.errors = {};\n    return draft;\n  });\n}\n\nfunction loginSuccessReducer(state = initialState.auth, action) {\n  return produce(state, draft => {\n    const {\n      token\n    } = action.payload;\n    draft.authorized = true;\n    draft.errors = {};\n    cookie.set('token', token, {\n      expires: 1\n    });\n    return draft;\n  });\n}\n\nfunction loginFailReducer(state = initialState.auth, action) {\n  return produce(state, draft => {\n    const {\n      errors\n    } = action.payload;\n    draft.authorized = false;\n    draft.errors = errors;\n    return draft;\n  });\n}\n\nfunction loginCheckerReducer(state = initialState.auth, action) {\n  return produce(state, draft => {\n    const {\n      fields\n    } = action.payload;\n\n    _.forEach(fields, (value, key) => {\n      if (value === '') {\n        draft.errors[key] = 'فیلد خالی است.';\n      }\n    });\n\n    return draft;\n  });\n}\n\nfunction setAuthReducer(state = initialState.auth, action) {\n  return produce(state, draft => {\n    const {\n      auth\n    } = action.payload;\n    draft.authorized = auth;\n    return draft;\n  });\n}\n\nfunction logoutReducer(state = initialState.auth, action) {\n  return produce(state, draft => {\n    draft.authorized = false;\n    cookie.remove('token');\n    return draft;\n  });\n}\n\nfunction authReducers(state = initialState.auth, action) {\n  switch (action.type) {\n    case LOGIN_CLEAR:\n      return loginClearReducer(state, action);\n\n    case LOGIN_FAIL:\n      return loginFailReducer(state, action);\n\n    case LOGIN_SUCCESS:\n      return loginSuccessReducer(state, action);\n\n    case LOGIN_CHECK:\n      return loginCheckerReducer(state, action);\n\n    case SET_AUTH:\n      return setAuthReducer(state, action);\n\n    case LOGOUT:\n      return logoutReducer(state, action);\n\n    default:\n      return state;\n  }\n}\n\nexport default authReducers;","map":null,"metadata":{},"sourceType":"module"}