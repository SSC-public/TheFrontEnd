{"ast":null,"code":"import _ from 'lodash';\nimport produce from 'immer';\nimport cookie from 'js-cookie';\nimport { LOGIN_CLEAR, LOGIN_FAIL, LOGIN_SUCCESS, LOGIN_CHECK, SET_AUTH, LOGOUT } from '../actions/auth';\nimport initialState from '../store/initialState';\n\nfunction loginClearReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.auth;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    draft.authorized = false;\n    draft.errors = {};\n    return draft;\n  });\n}\n\nfunction loginSuccessReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.auth;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    var token = action.payload.token;\n    draft.authorized = true;\n    draft.errors = {};\n    cookie.set('token', token, {\n      expires: 1\n    });\n    return draft;\n  });\n}\n\nfunction loginFailReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.auth;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    var errors = action.payload.errors;\n    draft.authorized = false;\n    draft.errors = errors;\n    return draft;\n  });\n}\n\nfunction loginCheckerReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.auth;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    var fields = action.payload.fields;\n\n    _.forEach(fields, function (value, key) {\n      if (value === '') {\n        draft.errors[key] = 'فیلد خالی است.';\n      }\n    });\n\n    return draft;\n  });\n}\n\nfunction setAuthReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.auth;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    var auth = action.payload.auth;\n    draft.authorized = auth;\n    return draft;\n  });\n}\n\nfunction logoutReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.auth;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    draft.authorized = false;\n    cookie.remove('token');\n    return draft;\n  });\n}\n\nfunction authReducers() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.auth;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case LOGIN_CLEAR:\n      return loginClearReducer(state, action);\n\n    case LOGIN_FAIL:\n      return loginFailReducer(state, action);\n\n    case LOGIN_SUCCESS:\n      return loginSuccessReducer(state, action);\n\n    case LOGIN_CHECK:\n      return loginCheckerReducer(state, action);\n\n    case SET_AUTH:\n      return setAuthReducer(state, action);\n\n    case LOGOUT:\n      return logoutReducer(state, action);\n\n    default:\n      return state;\n  }\n}\n\nexport default authReducers;","map":null,"metadata":{},"sourceType":"module"}