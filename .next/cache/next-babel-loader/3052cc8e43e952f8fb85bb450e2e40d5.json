{"ast":null,"code":"var __jsx = React.createElement;\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { Form, Grid } from 'semantic-ui-react';\nimport Input from '../../input';\nimport Button from '../../button';\nimport check from './check';\nimport { resetAPI } from \"../../../../redux/api/auth\";\nexport default class ForgotFields extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password_1: '',\n      password_2: '',\n      errors: {\n        password_1: false,\n        password_2: false\n      }\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n\n  onSubmit() {\n    this.setState(prevState => {\n      const res = check(prevState);\n\n      if (res.problem) {\n        const {\n          notify\n        } = this.props;\n        notify(res.problem);\n      } else {\n        this.reset();\n      }\n\n      return {\n        errors: res.errors\n      };\n    });\n  }\n\n  handleChange(event, {\n    name,\n    value\n  }) {\n    this.setState({\n      [name]: value\n    });\n  }\n\n  reset() {\n    const {\n      password_1,\n      password_2\n    } = this.state;\n    const {\n      uid,\n      token,\n      notify\n    } = this.props;\n    axios.post(resetAPI(), {\n      uid,\n      token,\n      new_password1: password_1,\n      new_password2: password_2\n    }).then(res => {\n      const serverData = res.data;\n      console.log(serverData);\n\n      if (serverData.status_code !== 200) {\n        if (serverData.email) {\n          notify('tokenNotValid');\n        }\n\n        if (serverData.new_password2) {\n          notify('commonPassword');\n        }\n      } else {\n        notify('success');\n      }\n    });\n  }\n\n  render() {\n    const {\n      password_1,\n      password_2\n    } = this.state;\n    const {\n      errors\n    } = this.state;\n    return __jsx(Grid, {\n      centered: true\n    }, __jsx(Grid.Column, {\n      verticalAlign: \"middle\"\n    }, __jsx(Form, null, __jsx(Form.Group, {\n      width: 2,\n      dir: \"rtl\"\n    }, __jsx(Input, {\n      onChange: this.handleChange,\n      name: \"password_1\",\n      type: \"password\",\n      label: \"\\u06AF\\u0630\\u0631\\u0648\\u0627\\u0698\\u0647\",\n      value: password_1,\n      error: errors.password_1\n    }), __jsx(Input, {\n      onChange: this.handleChange,\n      name: \"password_2\",\n      label: \"\\u062A\\u06A9\\u0631\\u0627\\u0631 \\u06AF\\u0630\\u0631\\u0648\\u0627\\u0698\\u0647\",\n      type: \"password\",\n      value: password_2,\n      error: errors.password_2\n    })), __jsx(Form.Field, {\n      dir: \"rtl\"\n    }, __jsx(\"a\", {\n      href: \"/login\"\n    }, \"\\u0648\\u0631\\u0648\\u062F\")), __jsx(Button, {\n      onClick: this.onSubmit,\n      color: \"blue\",\n      text: \"\\u062A\\u063A\\u06CC\\u06CC\\u0631 \\u0631\\u0645\\u0632\"\n    }))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}