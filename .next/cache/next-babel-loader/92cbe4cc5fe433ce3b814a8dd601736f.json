{"ast":null,"code":"import _ from 'lodash';\nimport { loginAPI, authAPI } from '../api/auth';\nimport { pageLoadingAction } from './page';\nexport const LOGIN_CLEAR = 'LOGIN_CLEAR';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\nexport const LOGIN_CHECK = 'LOGIN_CHECK';\nexport const SET_AUTH = 'SET_AUTH';\nexport const LOGOUT = 'LOGOUT';\nexport function loginClearAction() {\n  return {\n    type: LOGIN_CLEAR\n  };\n}\n\nfunction loginSuccessAction(token) {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: {\n      token\n    }\n  };\n}\n\nfunction loginFailAction(errors) {\n  return {\n    type: LOGIN_FAIL,\n    payload: {\n      errors\n    }\n  };\n}\n\nexport function loginCheckerAction(fields) {\n  return {\n    type: LOGIN_CHECK,\n    payload: {\n      fields\n    }\n  };\n}\nexport function loginAction(username, password) {\n  return (dispatch, getState) => {\n    dispatch(pageLoadingAction(true));\n    dispatch(loginClearAction());\n    dispatch(loginCheckerAction({\n      username,\n      password\n    }));\n\n    if (_.isEmpty(getState().auth.errors)) {\n      loginAPI({\n        username,\n        password\n      }).then(res => {\n        const {\n          data\n        } = res;\n\n        if (data.status_code === 200) {\n          dispatch(loginSuccessAction(data.access));\n          dispatch(pageLoadingAction(false));\n        } else {\n          dispatch(loginFailAction(data.detail));\n          dispatch(pageLoadingAction(false));\n        }\n      });\n    } else {\n      dispatch(pageLoadingAction(false));\n    }\n  };\n}\n\nfunction setAuthAction(auth) {\n  return {\n    type: SET_AUTH,\n    payload: {\n      auth\n    }\n  };\n}\n\nexport function authorizeAction(token) {\n  return dispatch => {\n    return authAPI(token).then(res => {\n      if (res.data.status_code !== 200) {\n        dispatch(setAuthAction(false));\n        return false;\n      }\n\n      dispatch(setAuthAction(true));\n      return true;\n    });\n  };\n}\nexport function logoutAction() {\n  return {\n    type: LOGOUT\n  };\n}","map":{"version":3,"sources":["/Users/parsa/Desktop/everything/projects/ongoing/DataDays/TheFrontEnd/redux/actions/auth.js"],"names":["_","loginAPI","authAPI","pageLoadingAction","LOGIN_CLEAR","LOGIN_SUCCESS","LOGIN_FAIL","LOGIN_CHECK","SET_AUTH","LOGOUT","loginClearAction","type","loginSuccessAction","token","payload","loginFailAction","errors","loginCheckerAction","fields","loginAction","username","password","dispatch","getState","isEmpty","auth","then","res","data","status_code","access","detail","setAuthAction","authorizeAction","logoutAction"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport { loginAPI, authAPI } from '../api/auth';\nimport { pageLoadingAction } from './page';\n\nexport const LOGIN_CLEAR = 'LOGIN_CLEAR';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\nexport const LOGIN_CHECK = 'LOGIN_CHECK';\n\nexport const SET_AUTH = 'SET_AUTH';\n\nexport const LOGOUT = 'LOGOUT';\n\nexport function loginClearAction() {\n  return {\n    type: LOGIN_CLEAR,\n  };\n}\n\nfunction loginSuccessAction(token) {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: {\n      token,\n    },\n  };\n}\n\nfunction loginFailAction(errors) {\n  return {\n    type: LOGIN_FAIL,\n    payload: {\n      errors,\n    },\n  };\n}\n\nexport function loginCheckerAction(fields) {\n  return {\n    type: LOGIN_CHECK,\n    payload: {\n      fields,\n    },\n  };\n}\n\nexport function loginAction(username, password) {\n  return (dispatch, getState) => {\n    dispatch(pageLoadingAction(true));\n    dispatch(loginClearAction());\n    dispatch(loginCheckerAction({ username, password }));\n    if (_.isEmpty(getState().auth.errors)) {\n      loginAPI({ username, password }).then((res) => {\n        const { data } = res;\n        if (data.status_code === 200) {\n          dispatch(loginSuccessAction(data.access));\n          dispatch(pageLoadingAction(false));\n        } else {\n          dispatch(loginFailAction(data.detail));\n          dispatch(pageLoadingAction(false));\n        }\n      });\n    } else {\n      dispatch(pageLoadingAction(false));\n    }\n  };\n}\n\nfunction setAuthAction(auth) {\n  return {\n    type: SET_AUTH,\n    payload: {\n      auth,\n    },\n  };\n}\n\nexport function authorizeAction(token) {\n  return (dispatch) => {\n    return authAPI(token).then((res) => {\n      if (res.data.status_code !== 200) {\n        dispatch(setAuthAction(false));\n        return false;\n      }\n      dispatch(setAuthAction(true));\n      return true;\n    });\n  };\n}\n\nexport function logoutAction() {\n  return {\n    type: LOGOUT,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}